var personGroupId,personId,personName,groupName,imageName,imageURL,face,FaceApiKey,ApiHost,personDetails,groupDetails,returnFaceLandmarks,returnFaceAttributes,returnFaceId=!0,numToReturn=10,maxNumOfCandidatesReturned=10,confidenceThreshold=.6;function getPerson(e){if(null==personId&&null==e)return"Please provide the ID of the person you wish to retrieve";null==e&&(e=personId);var n={personGroupId:personGroupId,personId:e};$.ajax({url:ApiHost+"/face/v1.0/persongroups/{personGroupId}/persons/{personId}?"+$.param(n),beforeSend:function(e){e.setRequestHeader("Ocp-Apim-Subscription-Key",FaceApiKey)},type:"GET",data:null}).done(function(e){return e}).fail(function(e,n,r){return e.responseText})}function identifyFace(){$.ajax({url:ApiHost+"/face/v1.0/identify?",beforeSend:function(e){e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Ocp-Apim-Subscription-Key",FaceApiKey)},type:"POST",data:'{"PersonGroupId":"'+personGroupId+'","faceIds":["'+face+'"],"maxNumOfCandidatesReturned": '+maxNumOfCandidatesReturned+',"confidenceThreshold": '+confidenceThreshold+"}"}).done(function(e){var n;try{n=e[0].candidates[0].personId}catch(e){return"Face Not Detected."}getPerson(n)}).fail(function(e,n,r){return e.responseText})}function listPersons(){var e={top:numToReturn};$.ajax({url:ApiHost+"/face/v1.0/persongroups/"+personGroupId+"/persons?"+$.param(e),beforeSend:function(e){e.setRequestHeader("Ocp-Apim-Subscription-Key",FaceApiKey)},type:"GET",data:null}).done(function(e){return e}).fail(function(e,n,r){return e.responseText})}function uploadFace(){if(null==personId&&null==personName)return"Please provide either a person's ID or a person's name.";if(null==personId){var e={personGroupId:personGroupId};$.ajax({url:ApiHost+"/face/v1.0/persongroups/{personGroupId}/persons?"+$.param(e),beforeSend:function(e){e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Ocp-Apim-Subscription-Key",FaceApiKey)},type:"POST",data:JSON.stringify({name:personName,userData:personDetails})}).done(function(e){return e}).fail(function(e,n,r){return e.responseText})}else e={personGroupId:personGroupId,personId:personId},$.ajax({url:ApiHost+"/face/v1.0/persongroups/{personGroupId}/persons/{personId}/persistedFaces?"+$.param(e),beforeSend:function(e){e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Ocp-Apim-Subscription-Key",FaceApiKey)},type:"POST",data:JSON.stringify({url:imageURL})}).done(function(e){return e}).fail(function(e,n,r){return e.responseText})}function deletePerson(e){if(null==personId&&null==e)return"Please provide the ID of the person you wish to delete";null==e&&(e=personId);var n={personGroupId:personGroupId,personId:e};$.ajax({url:ApiHost+"/face/v1.0/persongroups/{personGroupId}/persons/{personId}?"+$.param(n),beforeSend:function(e){e.setRequestHeader("Ocp-Apim-Subscription-Key",FaceApiKey)},type:"DELETE",data:null}).done(function(e){return e}).fail(function(e,n,r){return e.responseText})}function detectFace(){var e={returnFaceId:returnFaceId,returnFaceLandmarks:returnFaceLandmarks,returnFaceAttributes:returnFaceAttributes};return $.ajax({url:ApiHost+"/face/v1.0/detect?"+$.param(e),beforeSend:function(e){e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("Ocp-Apim-Subscription-Key",FaceApiKey),e.contentType="application/octet-stream"},type:"POST",data:JSON.stringify({url:imageURL})}).done(function(e){try{face=e[0].faceId}catch(e){return e.message}}).fail(function(e,n,r){return e.responseText}),face}function deleteGroup(){var e={personGroupId:personGroupId};$.ajax({url:ApiHost+"/face/v1.0/persongroups/{personGroupId}?"+$.param(e),beforeSend:function(e){e.setRequestHeader("Ocp-Apim-Subscription-Key",FaceApiKey)},type:"DELETE",data:null}).done(function(e){return e}).fail(function(e,n,r){return e.responseText})}function getTrainingStatus(){var e={personGroupId:personGroupId};$.ajax({url:ApiHost+"/face/v1.0/persongroups/{personGroupId}/training?"+$.param(e),beforeSend:function(e){e.setRequestHeader("Ocp-Apim-Subscription-Key",FaceApiKey)},type:"GET",data:null}).done(function(e){return e}).fail(function(e,n,r){return e.responseText})}function listGroups(){var e={top:numToReturn};$.ajax({url:ApiHost+"/face/v1.0/persongroups?"+$.param(e),beforeSend:function(e){e.setRequestHeader("Ocp-Apim-Subscription-Key",FaceApiKey)},type:"GET",data:null}).done(function(e){return e}).fail(function(e,n,r){return e.responseText})}function trainGroup(){var e={personGroupId:personGroupId};$.ajax({url:ApiHost+"/face/v1.0/persongroups/{personGroupId}/train?"+$.param(e),beforeSend:function(e){e.setRequestHeader("Ocp-Apim-Subscription-Key",FaceApiKey)},type:"POST",data:null}).done(function(e){return"Training in progress. Call getTrainingStatus() to get the status of the group training."}).fail(function(e,n,r){return e.responseText})}function createGroup(){var e={personGroupId:personGroupId};$.ajax({url:ApiHost+"/face/v1.0/persongroups/{personGroupId}?"+$.param(e),beforeSend:function(e){e.setRequestHeader("Ocp-Apim-Subscription-Key",FaceApiKey)},type:"PUT",data:JSON.stringify({name:groupName,userData:groupDetails})}).done(function(e){return e}).fail(function(e,n,r){return e.responseText})}